<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nova Admin | Withdrawal Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#0b0e11] text-white p-6 font-sans">
    <div class="max-w-4xl mx-auto space-y-6">
        <div class="flex justify-between items-center bg-[#1a1c23] p-6 rounded-2xl border border-emerald-500/20 shadow-xl">
            <h1 class="text-xl font-bold text-emerald-500 flex items-center gap-2">
                <span>üõ°Ô∏è</span> Nova Mining Admin Panel
            </h1>
            <div id="statusBadge" class="px-4 py-1 bg-emerald-500/10 text-emerald-500 text-xs rounded-full border border-emerald-500/20">
                Live Connection
            </div>
        </div>

        <div class="bg-[#1a1c23] rounded-3xl border border-white/5 shadow-xl overflow-hidden">
            <table class="w-full text-left">
                <thead class="bg-white/5 text-gray-400 text-xs uppercase tracking-widest">
                    <tr>
                        <th class="p-4">Wallet</th>
                        <th class="p-4">Address</th>
                        <th class="p-4">Amount</th>
                        <th class="p-4">Status</th>
                    </tr>
                </thead>
                <tbody id="withdrawalsTable" class="divide-y divide-white/5">
                    </tbody>
            </table>
            <div id="loadingText" class="p-10 text-center text-gray-500">
                Fetching latest requests...
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, query, orderBy, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // ŸÖŸÅÿßÿ™Ÿäÿ≠ ÿßŸÑÿ±ÿ®ÿ∑ ÿßŸÑÿ¨ÿØŸäÿØÿ© ÿßŸÑÿ™Ÿä ÿ™ÿ¨ÿπŸÑ ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ ÿ™ÿπŸÖŸÑ ŸÖÿπ ŸÖÿ¥ÿ±ŸàÿπŸÉ ÿßŸÑÿ≠ÿßŸÑŸä
        const firebaseConfig = {
          apiKey: "AIzaSyCDIizIvd_7nUT6B4sGIc_s-CnZ5hQECCg",
          authDomain: "pay-coins.firebaseapp.com",
          projectId: "pay-coins",
          storageBucket: "pay-coins.firebasestorage.app",
          messagingSenderId: "279908586614",
          appId: "1:279908586614:web:632ce326f8b3a0e0e47b57",
          measurementId: "G-SG3W4FH9DC"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // ÿ¨ŸÑÿ® ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÖŸÜ ŸÖÿ¨ŸÖŸàÿπÿ© "withdrawals" Ÿàÿ™ÿ±ÿ™Ÿäÿ®Ÿáÿß ÿ≠ÿ≥ÿ® ÿßŸÑŸàŸÇÿ™
        const q = query(collection(db, "withdrawals"), orderBy("timestamp", "desc"));

        onSnapshot(q, (snapshot) => {
            const tableBody = document.getElementById('withdrawalsTable');
            const loadingText = document.getElementById('loadingText');
            tableBody.innerHTML = "";
            
            if (snapshot.empty) {
                loadingText.innerText = "No withdrawal requests yet.";
            } else {
                loadingText.style.display = "none";
            }

            snapshot.forEach((doc) => {
                const data = doc.data();
                const row = `
                    <tr class="hover:bg-white/5 transition-colors">
                        <td class="p-4 text-sm font-medium">${data.wallet}</td>
                        <td class="p-4 text-xs text-gray-400 font-mono">${data.address}</td>
                        <td class="p-4 text-sm text-emerald-400 font-bold">${data.amount}</td>
                        <td class="p-4">
                            <span class="px-2 py-1 bg-yellow-500/10 text-yellow-500 text-[10px] rounded border border-yellow-500/20">
                                ${data.status}
                            </span>
                        </td>
                    </tr>
                `;
                tableBody.innerHTML += row;
            });
        }, (error) => {
            console.error("Error fetching data: ", error);
            document.getElementById('loadingText').innerText = "Access Denied: Check Security Rules.";
        });
    </script>
</body>
</html>
